/*
------------------------------------------------------------------------------ 
This code was generated by Amplication. 
 
Changes to this file will be lost if the code is regenerated. 

There are other ways to to customize your code, see this doc to learn more
https://docs.amplication.com/how-to/custom-code

------------------------------------------------------------------------------
  */
import { PrismaService } from "../../prisma/prisma.service";

import {
  Prisma,
  Entity as PrismaEntity,
  Association as PrismaAssociation,
  User as PrismaUser,
  Template as PrismaTemplate,
} from "@prisma/client";

export class EntityServiceBase {
  constructor(protected readonly prisma: PrismaService) {}

  async count(args: Omit<Prisma.EntityCountArgs, "select">): Promise<number> {
    return this.prisma.entity.count(args);
  }

  async entities(args: Prisma.EntityFindManyArgs): Promise<PrismaEntity[]> {
    return this.prisma.entity.findMany(args);
  }
  async entity(
    args: Prisma.EntityFindUniqueArgs
  ): Promise<PrismaEntity | null> {
    return this.prisma.entity.findUnique(args);
  }
  async createEntity(args: Prisma.EntityCreateArgs): Promise<PrismaEntity> {
    return this.prisma.entity.create(args);
  }
  async updateEntity(args: Prisma.EntityUpdateArgs): Promise<PrismaEntity> {
    return this.prisma.entity.update(args);
  }
  async deleteEntity(args: Prisma.EntityDeleteArgs): Promise<PrismaEntity> {
    return this.prisma.entity.delete(args);
  }

  async findIncomingAssociations(
    parentId: string,
    args: Prisma.AssociationFindManyArgs
  ): Promise<PrismaAssociation[]> {
    return this.prisma.entity
      .findUniqueOrThrow({
        where: { id: parentId },
      })
      .incomingAssociations(args);
  }

  async findOutgoingAssociations(
    parentId: string,
    args: Prisma.AssociationFindManyArgs
  ): Promise<PrismaAssociation[]> {
    return this.prisma.entity
      .findUniqueOrThrow({
        where: { id: parentId },
      })
      .outgoingAssociations(args);
  }

  async getOwner(parentId: string): Promise<PrismaUser | null> {
    return this.prisma.entity
      .findUnique({
        where: { id: parentId },
      })
      .owner();
  }

  async getTemplate(parentId: string): Promise<PrismaTemplate | null> {
    return this.prisma.entity
      .findUnique({
        where: { id: parentId },
      })
      .template();
  }
}
